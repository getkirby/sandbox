(function(){"use strict";let j="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(s=>s?parseInt(s,36):1);for(let s=1;s<j.length;s++)j[s]+=j[s-1];function Pe(s){for(let e=1;e<j.length;e+=2)if(j[e]>s)return j[e-1]<=s;return!1}function ce(s){return s>=127462&&s<=127487}const de=8205;function Ee(s,e,t=!0,n=!0){return(t?ge:Me)(s,e,n)}function ge(s,e,t){if(e==s.length)return e;e&&pe(s.charCodeAt(e))&&me(s.charCodeAt(e-1))&&e--;let n=re(s,e);for(e+=xe(n);e<s.length;){let i=re(s,e);if(n==de||i==de||t&&Pe(i))e+=xe(i),n=i;else if(ce(i)){let r=0,l=e-2;for(;l>=0&&ce(re(s,l));)r++,l-=2;if(r%2==0)break;e+=2}else break}return e}function Me(s,e,t){for(;e>0;){let n=ge(s,e-2,t);if(n<e)return n;e--}return 0}function pe(s){return s>=56320&&s<57344}function me(s){return s>=55296&&s<56320}function re(s,e){let t=s.charCodeAt(e);if(!me(t)||e+1==s.length)return t;let n=s.charCodeAt(e+1);return pe(n)?(t-55296<<10)+(n-56320)+65536:t}function xe(s){return s<65536?1:2}function Oe(s,e,t=s.length){let n=0;for(let i=0;i<t;)s.charCodeAt(i)==9?(n+=e-n%e,i++):(n++,i=Ee(s,i));return n}class F{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){let i=[];return this.decompose(0,e,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(t,this.length,i,1),E.from(i,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let n=[];return this.decompose(e,t,n,0),E.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),i=new Q(this),r=new Q(e);for(let l=t,h=t;;){if(i.next(l),r.next(l),l=0,i.lineBreak!=r.lineBreak||i.done!=r.done||i.value!=r.value)return!1;if(h+=i.value.length,i.done||h>=n)return!0}}iter(e=1){return new Q(this,e)}iterRange(e,t=this.length){return new we(this,e,t)}iterLines(e,t){let n;if(e==null)n=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;n=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new ye(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?F.empty:e.length<=32?new C(e):E.from(C.split(e,[]))}}class C extends F{constructor(e,t=Re(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,i){for(let r=0;;r++){let l=this.text[r],h=i+l.length;if((t?n:h)>=e)return new _e(i,h,n,l);i=h+1,n++}}decompose(e,t,n,i){let r=e<=0&&t>=this.length?this:new C(be(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let l=n.pop(),h=X(r.text,l.text.slice(),0,r.length);if(h.length<=32)n.push(new C(h,l.length+r.length));else{let u=h.length>>1;n.push(new C(h.slice(0,u)),new C(h.slice(u)))}}else n.push(r)}replace(e,t,n){if(!(n instanceof C))return super.replace(e,t,n);let i=X(this.text,X(n.text,be(this.text,0,e)),t),r=this.length+n.length-(t-e);return i.length<=32?new C(i,r):E.from(C.split(i,[]),r)}sliceString(e,t=this.length,n=`
`){let i="";for(let r=0,l=0;r<=t&&l<this.text.length;l++){let h=this.text[l],u=r+h.length;r>e&&l&&(i+=n),e<u&&t>r&&(i+=h.slice(Math.max(0,e-r),t-r)),r=u+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],i=-1;for(let r of e)n.push(r),i+=r.length+1,n.length==32&&(t.push(new C(n,i)),n=[],i=-1);return i>-1&&t.push(new C(n,i)),t}}class E extends F{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,i){for(let r=0;;r++){let l=this.children[r],h=i+l.length,u=n+l.lines-1;if((t?u:h)>=e)return l.lineInner(e,t,n,i);i=h+1,n=u+1}}decompose(e,t,n,i){for(let r=0,l=0;l<=t&&r<this.children.length;r++){let h=this.children[r],u=l+h.length;if(e<=u&&t>=l){let m=i&((l<=e?1:0)|(u>=t?2:0));l>=e&&u<=t&&!m?n.push(h):h.decompose(e-l,t-l,n,m)}l=u+1}}replace(e,t,n){if(n.lines<this.lines)for(let i=0,r=0;i<this.children.length;i++){let l=this.children[i],h=r+l.length;if(e>=r&&t<=h){let u=l.replace(e-r,t-r,n),m=this.lines-l.lines+u.lines;if(u.lines<m>>5-1&&u.lines>m>>5+1){let a=this.children.slice();return a[i]=u,new E(a,this.length-(t-e)+n.length)}return super.replace(r,h,u)}r=h+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n=`
`){let i="";for(let r=0,l=0;r<this.children.length&&l<=t;r++){let h=this.children[r],u=l+h.length;l>e&&r&&(i+=n),e<u&&t>l&&(i+=h.sliceString(e-l,t-l,n)),l=u+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof E))return 0;let n=0,[i,r,l,h]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,r+=t){if(i==l||r==h)return n;let u=this.children[i],m=e.children[r];if(u!=m)return n+u.scanIdentical(m,t);n+=u.length+1}}static from(e,t=e.reduce((n,i)=>n+i.length+1,-1)){let n=0;for(let f of e)n+=f.lines;if(n<32){let f=[];for(let b of e)b.flatten(f);return new C(f,t)}let i=Math.max(32,n>>5),r=i<<1,l=i>>1,h=[],u=0,m=-1,a=[];function c(f){let b;if(f.lines>r&&f instanceof E)for(let N of f.children)c(N);else f.lines>l&&(u>l||!u)?(y(),h.push(f)):f instanceof C&&u&&(b=a[a.length-1])instanceof C&&f.lines+b.lines<=32?(u+=f.lines,m+=f.length+1,a[a.length-1]=new C(b.text.concat(f.text),b.length+1+f.length)):(u+f.lines>i&&y(),u+=f.lines,m+=f.length+1,a.push(f))}function y(){u!=0&&(h.push(a.length==1?a[0]:E.from(a,m)),m=-1,u=a.length=0)}for(let f of e)c(f);return y(),h.length==1?h[0]:new E(h,t)}}F.empty=new C([""],0);function Re(s){let e=-1;for(let t of s)e+=t.length+1;return e}function X(s,e,t=0,n=1e9){for(let i=0,r=0,l=!0;r<s.length&&i<=n;r++){let h=s[r],u=i+h.length;u>=t&&(u>n&&(h=h.slice(0,n-i)),i<t&&(h=h.slice(t-i)),l?(e[e.length-1]+=h,l=!1):e.push(h)),i=u+1}return e}function be(s,e,t){return X(s,[""],e,t)}class Q{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof C?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],r=this.offsets[n],l=r>>1,h=i instanceof C?i.text.length:i.children.length;if(l==(t>0?h:0)){if(n==0)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(t>0?0:1)){if(this.offsets[n]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof C){let u=i.text[l+(t<0?-1:0)];if(this.offsets[n]+=t,u.length>Math.max(0,e))return this.value=e==0?u:t>0?u.slice(e):u.slice(0,u.length-e),this;e-=u.length}else{let u=i.children[l+(t<0?-1:0)];e>u.length?(e-=u.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(u),this.offsets.push(t>0?1:(u instanceof C?u.text.length:u.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class we{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new Q(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=n?i:t<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class ye{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:i}=this.inner.next(e);return t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(F.prototype[Symbol.iterator]=function(){return this.iter()},Q.prototype[Symbol.iterator]=we.prototype[Symbol.iterator]=ye.prototype[Symbol.iterator]=function(){return this});class _e{constructor(e,t,n,i){this.from=e,this.to=t,this.number=n,this.text=i}get length(){return this.to-this.from}}class ${constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let n,i;return this.empty?n=i=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new $(n,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return A.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return A.range(this.anchor,n)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return A.range(e.anchor,e.head)}}class A{constructor(e,t=0){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:A.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new A([this.main])}addRange(e,t=!0){return A.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,A.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new A(e.ranges.map(t=>$.fromJSON(t)),e.main)}static single(e,t=e){return new A([A.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<e.length;i++){let r=e[i];if(r.empty?r.from<=n:r.from<n)return Je(e.slice(),t);n=r.to}return new A(e,t)}static cursor(e,t=0,n,i){return new $(e,e,(t==0?0:t<0?4:8)|(n==null?3:Math.min(2,n))|(i!=null?i:33554431)<<5)}static range(e,t,n){let i=(n!=null?n:33554431)<<5;return t<e?new $(t,e,16|i|8):new $(e,t,i|(t>e?4:0))}}function Je(s,e=0){let t=s[e];s.sort((n,i)=>n.from-i.from),e=s.indexOf(t);for(let n=1;n<s.length;n++){let i=s[n],r=s[n-1];if(i.empty?i.from<=r.to:i.from<r.to){let l=r.from,h=Math.max(i.to,r.to);n<=e&&e--,s.splice(--n,2,i.anchor>i.head?A.range(h,l):A.range(l,h))}}return new A(s,e)}let ve=0;class se{constructor(e,t,n,i,r){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=i,this.extensions=r,this.id=ve++,this.default=e([])}static define(e={}){return new se(e.combine||(t=>t),e.compareInput||((t,n)=>t===n),e.compare||(e.combine?(t,n)=>t===n:Le),!!e.static,e.enables)}of(e){return new le([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new le(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new le(e,this,2,t)}from(e,t){return t||(t=n=>n),this.compute([e],n=>t(n.field(e)))}}function Le(s,e){return s==e||s.length==e.length&&s.every((t,n)=>t===e[n])}class le{constructor(e,t,n,i){this.dependencies=e,this.facet=t,this.type=n,this.value=i,this.id=ve++}dynamicSlot(e){var t;let n=this.value,i=this.facet.compareInput,r=this.id,l=e[r]>>1,h=this.type==2,u=!1,m=!1,a=[];for(let c of this.dependencies)c=="doc"?u=!0:c=="selection"?m=!0:(((t=e[c.id])!==null&&t!==void 0?t:1)&1)==0&&a.push(e[c.id]);return{create(c){return c.values[l]=n(c),1},update(c,y){if(u&&y.docChanged||m&&(y.docChanged||y.selection)||a.some(f=>(qe(c,f)&1)>0)){let f=n(c);if(h?!Ce(f,c.values[l],i):!i(f,c.values[l]))return c.values[l]=f,1}return 0},reconfigure(c,y){let f=n(c),b=y.config.address[r];if(b!=null){let N=De(y,b);if(h?Ce(f,N,i):i(f,N))return c.values[l]=N,0}return c.values[l]=f,1}}}}function Ce(s,e,t){if(s.length!=e.length)return!1;for(let n=0;n<s.length;n++)if(!t(s[n],e[n]))return!1;return!0}function qe(s,e){if(e&1)return 2;let t=e>>1,n=s.status[t];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;s.status[t]=4;let i=s.computeSlot(s,s.config.dynamicSlots[t]);return s.status[t]=2|i}function De(s,e){return e&1?s.config.staticValues[e>>1]:s.values[e>>1]}let Ue;try{Ue=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}const Ve=1024;let We=0;class S{constructor(e={}){this.id=We++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=O.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}}S.closedBy=new S({deserialize:s=>s.split(" ")}),S.openedBy=new S({deserialize:s=>s.split(" ")}),S.group=new S({deserialize:s=>s.split(" ")}),S.contextHash=new S({perNode:!0}),S.lookAhead=new S({perNode:!0}),S.mounted=new S({perNode:!0});const je=Object.create(null);class O{constructor(e,t,n,i=0){this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):je,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new O(e.name||"",t,e.id,n);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(S.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return n=>{for(let i=n.prop(S.group),r=-1;r<(i?i.length:0);r++){let l=t[r<0?n.name:i[r]];if(l)return l}}}}O.none=new O("",Object.create(null),0,8);const Y=new WeakMap,Se=new WeakMap;class M{constructor(e,t,n,i,r){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[l,h]of r)this.props[typeof l=="number"?l:l.id]=h}}toString(){let e=this.prop(S.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let i=n.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e,t=0){let n=e!=null&&Y.get(this)||this.topNode,i=new ee(n);return e!=null&&(i.moveTo(e,t),Y.set(this,i._tree)),i}fullCursor(){return new ee(this.topNode,1)}get topNode(){return new R(this,0,0,null)}resolve(e,t=0){let n=H(Y.get(this)||this.topNode,e,t,!1);return Y.set(this,n),n}resolveInner(e,t=0){let n=H(Se.get(this)||this.topNode,e,t,!0);return Se.set(this,n),n}iterate(e){let{enter:t,leave:n,from:i=0,to:r=this.length}=e;for(let l=this.cursor(),h=()=>l.node;;){let u=!1;if(l.from<=r&&l.to>=i&&(l.type.isAnonymous||t(l.type,l.from,l.to,h)!==!1)){if(l.firstChild())continue;l.type.isAnonymous||(u=!0)}for(;u&&n&&n(l.type,l.from,l.to,h),u=l.type.isAnonymous,!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:fe(O.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,i)=>new M(this.type,t,n,i,this.propValues),e.makeTree||((t,n,i)=>new M(O.none,t,n,i)))}static build(e){return $e(e)}}M.empty=new M(O.none,[],[],0);class he{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new he(this.buffer,this.index)}}class U{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return O.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),e+=4,n==e)return r;let l=[];for(;e<n;)l.push(this.childString(e)),e=this.buffer[e+3];return r+"("+l.join(",")+")"}findChild(e,t,n,i,r){let{buffer:l}=this,h=-1;for(let u=e;u!=t&&!(ke(r,i,l[u+1],l[u+2])&&(h=u,n>0));u=l[u+3]);return h}slice(e,t,n,i){let r=this.buffer,l=new Uint16Array(t-e);for(let h=e,u=0;h<t;)l[u++]=r[h++],l[u++]=r[h++]-n,l[u++]=r[h++]-n,l[u++]=r[h++]-e;return new U(l,i-n,this.set)}}function ke(s,e,t,n){switch(s){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function Ae(s,e){let t=s.childBefore(e);for(;t;){let n=t.lastChild;if(!n||n.to!=t.to)break;n.type.isError&&n.from==n.to?(s=t,t=n.prevSibling):t=n}return s}function H(s,e,t,n){for(var i;s.from==s.to||(t<1?s.from>=e:s.from>e)||(t>-1?s.to<=e:s.to<e);){let r=!n&&s instanceof R&&s.index<0?null:s.parent;if(!r)return s;s=r}if(n)for(let r=s,l=r.parent;l;r=l,l=r.parent)r instanceof R&&r.index<0&&((i=l.enter(e,t,!0))===null||i===void 0?void 0:i.from)!=r.from&&(s=l);for(;;){let r=s.enter(e,t,n);if(!r)return s;s=r}}class R{constructor(e,t,n,i){this.node=e,this._from=t,this.index=n,this._parent=i}get type(){return this.node.type}get name(){return this.node.type.name}get from(){return this._from}get to(){return this._from+this.node.length}nextChild(e,t,n,i,r=0){for(let l=this;;){for(let{children:h,positions:u}=l.node,m=t>0?h.length:-1;e!=m;e+=t){let a=h[e],c=u[e]+l._from;if(!!ke(i,n,c,c+a.length)){if(a instanceof U){if(r&2)continue;let y=a.findChild(0,a.buffer.length,t,n-c,i);if(y>-1)return new L(new Fe(l,a,e,c),null,y)}else if(r&1||!a.type.isAnonymous||ue(a)){let y;if(!(r&1)&&a.props&&(y=a.prop(S.mounted))&&!y.overlay)return new R(y.tree,c,e,l);let f=new R(a,c,e,l);return r&1||!f.type.isAnonymous?f:f.nextChild(t<0?a.children.length-1:0,t,n,i)}}}if(r&1||!l.type.isAnonymous||(l.index>=0?e=l.index+t:e=t<0?-1:l._parent.node.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this.node.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this.node.children.length-1,-1,e,-2)}enter(e,t,n=!0,i=!0){let r;if(n&&(r=this.node.prop(S.mounted))&&r.overlay){let l=e-this.from;for(let{from:h,to:u}of r.overlay)if((t>0?h<=l:h<l)&&(t<0?u>=l:u>l))return new R(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i?0:2)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get cursor(){return new ee(this)}get tree(){return this.node}toTree(){return this.node}resolve(e,t=0){return H(this,e,t,!1)}resolveInner(e,t=0){return H(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Ae(this,e)}getChild(e,t=null,n=null){let i=T(this,e,t,n);return i.length?i[0]:null}getChildren(e,t=null,n=null){return T(this,e,t,n)}toString(){return this.node.toString()}}function T(s,e,t,n){let i=s.cursor,r=[];if(!i.firstChild())return r;if(t!=null){for(;!i.type.is(t);)if(!i.nextSibling())return r}for(;;){if(n!=null&&i.type.is(n))return r;if(i.type.is(e)&&r.push(i.node),!i.nextSibling())return n==null?r:[]}}class Fe{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class L{constructor(e,t,n){this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,n){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return r<0?null:new L(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n,i=!0){if(!i)return null;let{buffer:r}=this.context,l=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return l<0?null:new L(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new L(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new L(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get cursor(){return new ee(this)}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,r=n.buffer[this.index+3];if(r>i){let l=n.buffer[this.index+1],h=n.buffer[this.index+2];e.push(n.slice(i,r,l,h)),t.push(0)}return new M(this.type,e,t,this.to-this.from)}resolve(e,t=0){return H(this,e,t,!1)}resolveInner(e,t=0){return H(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Ae(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,n=null){let i=T(this,e,t,n);return i.length?i[0]:null}getChildren(e,t=null,n=null){return T(this,e,t,n)}}class ee{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof R)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return e?e instanceof R?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree.node.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=!0,i=!0){return this.buffer?i?this.enterChild(1,e,t):!1:this.yield(this._tree.enter(e,t,n&&!(this.mode&1),i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&1?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&1?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(i.buffer.buffer[r+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let r=t+e,l=e<0?-1:n.node.children.length;r!=l;r+=e){let h=n.node.children[r];if(this.mode&1||h instanceof U||!h.type.isAnonymous||ue(h))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer){e:for(let i=this.index,r=this.stack.length;r>=0;){for(let l=e;l;l=l._parent)if(l.index==i){if(i==this.index)return l;t=l,n=r+1;break e}i=this.stack[--r]}}for(let i=n;i<this.stack.length;i++)t=new L(this.buffer,t,this.stack[i]);return this.bufferNode=new L(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree.node}}function ue(s){return s.children.some(e=>e instanceof U||!e.type.isAnonymous||ue(e))}function $e(s){var e;let{buffer:t,nodeSet:n,maxBufferLength:i=Ve,reused:r=[],minRepeatType:l=n.types.length}=s,h=Array.isArray(t)?new he(t,t.length):t,u=n.types,m=0,a=0;function c(x,w,o,g,k){let{id:p,start:d,end:v,size:B}=h,z=a;for(;B<0;)if(h.next(),B==-1){let D=r[p];o.push(D),g.push(d-x);return}else if(B==-3){m=p;return}else if(B==-4){a=p;return}else throw new RangeError(`Unrecognized record size: ${B}`);let Z=u[p],q,_,Ne=d-x;if(v-d<=i&&(_=N(h.pos-w,k))){let D=new Uint16Array(_.size-_.skip),P=h.pos-_.size,J=D.length;for(;h.pos>P;)J=ne(_.start,D,J);q=new U(D,v-_.start,n),Ne=_.start-x}else{let D=h.pos-B;h.next();let P=[],J=[],W=p>=l?p:-1,K=0,ie=v;for(;h.pos>D;)W>=0&&h.id==W&&h.size>=0?(h.end<=ie-i&&(f(P,J,d,K,h.end,ie,W,z),K=P.length,ie=h.end),h.next()):c(d,D,P,J,W);if(W>=0&&K>0&&K<P.length&&f(P,J,d,K,d,ie,W,z),P.reverse(),J.reverse(),W>-1&&K>0){let ze=y(Z);q=fe(Z,P,J,0,P.length,0,v-d,ze,ze)}else q=b(Z,P,J,v-d,z-v)}o.push(q),g.push(Ne)}function y(x){return(w,o,g)=>{let k=0,p=w.length-1,d,v;if(p>=0&&(d=w[p])instanceof M){if(!p&&d.type==x&&d.length==g)return d;(v=d.prop(S.lookAhead))&&(k=o[p]+d.length+v)}return b(x,w,o,g,k)}}function f(x,w,o,g,k,p,d,v){let B=[],z=[];for(;x.length>g;)B.push(x.pop()),z.push(w.pop()+o-k);x.push(b(n.types[d],B,z,p-k,v-p)),w.push(k-o)}function b(x,w,o,g,k=0,p){if(m){let d=[S.contextHash,m];p=p?[d].concat(p):[d]}if(k>25){let d=[S.lookAhead,k];p=p?[d].concat(p):[d]}return new M(x,w,o,g,p)}function N(x,w){let o=h.fork(),g=0,k=0,p=0,d=o.end-i,v={size:0,start:0,skip:0};e:for(let B=o.pos-x;o.pos>B;){let z=o.size;if(o.id==w&&z>=0){v.size=g,v.start=k,v.skip=p,p+=4,g+=4,o.next();continue}let Z=o.pos-z;if(z<0||Z<B||o.start<d)break;let q=o.id>=l?4:0,_=o.start;for(o.next();o.pos>Z;){if(o.size<0)if(o.size==-3)q+=4;else break e;else o.id>=l&&(q+=4);o.next()}k=_,g+=z,p+=q}return(w<0||g==x)&&(v.size=g,v.start=k,v.skip=p),v.size>4?v:void 0}function ne(x,w,o){let{id:g,start:k,end:p,size:d}=h;if(h.next(),d>=0&&g<l){let v=o;if(d>4){let B=h.pos-(d-4);for(;h.pos>B;)o=ne(x,w,o)}w[--o]=v,w[--o]=p-x,w[--o]=k-x,w[--o]=g}else d==-3?m=g:d==-4&&(a=g);return o}let V=[],G=[];for(;h.pos>0;)c(s.start||0,s.bufferStart||0,V,G,-1);let I=(e=s.length)!==null&&e!==void 0?e:V.length?G[0]+V[0].length:0;return new M(u[s.topID],V.reverse(),G.reverse(),I)}const Ie=new WeakMap;function te(s,e){if(!s.isAnonymous||e instanceof U||e.type!=s)return 1;let t=Ie.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=s||!(n instanceof M)){t=1;break}t+=te(s,n)}Ie.set(e,t)}return t}function fe(s,e,t,n,i,r,l,h,u){let m=0;for(let b=n;b<i;b++)m+=te(s,e[b]);let a=Math.ceil(m*1.5/8),c=[],y=[];function f(b,N,ne,V,G){for(let I=ne;I<V;){let x=I,w=N[I],o=te(s,b[I]);for(I++;I<V;I++){let g=te(s,b[I]);if(o+g>=a)break;o+=g}if(I==x+1){if(o>a){let g=b[x];f(g.children,g.positions,0,g.children.length,N[x]+G);continue}c.push(b[x])}else{let g=N[I-1]+b[I-1].length-w;c.push(fe(s,b,N,x,I,w,g,null,u))}y.push(w+G-r)}}return f(e,t,n,i,0),(h||u)(c,y,l)}new S({perNode:!0});var oe;typeof navigator!="undefined"&&((oe=navigator.scheduling)===null||oe===void 0||oe.isInputPending);const ae=se.define({combine:s=>{if(!s.length)return"  ";if(!/^(?: +|\t+)$/.test(s[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return s[0]}});function He(s){let e=s.facet(ae);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function Ge(s,e){let t="",n=s.tabSize;if(s.facet(ae).charCodeAt(0)==9)for(;e>=n;)t+="	",e-=n;for(let i=0;i<e;i++)t+=" ";return t}function Be(s,e){let t=-1;return s.changeByRange(n=>{let i=[];for(let l=n.from;l<=n.to;){let h=s.doc.lineAt(l);h.number>t&&(n.empty||n.to>h.from)&&(e(h,i,n),t=h.number),l=h.to+1}let r=s.changes(i);return{changes:i,range:A.range(r.mapPos(n.anchor,1),r.mapPos(n.head,1))}})}const Ze={key:"Tab",run:({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(Be(s,(t,n)=>{n.push({from:t.from,insert:s.facet(ae)})}),{userEvent:"input.indent"})),!0),shift:({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(Be(s,(t,n)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let r=Oe(i,s.tabSize),l=0,h=Ge(s,Math.max(0,r-He(s)));for(;l<i.length&&l<h.length&&i.charCodeAt(l)==h.charCodeAt(l);)l++;n.push({from:t.from+l,to:t.from+i.length,insert:h.slice(l)})}),{userEvent:"delete.dedent"})),!0)};(function(){window.markdownEditorExtensions=window.markdownEditorExtensions||[],window.markdownEditorExtensions.push({keys(){return[Ze]}})})()})();
